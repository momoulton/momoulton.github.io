<!DOCTYPE html>
<html>

<head>
  <link rel='stylesheet' type="text/css" href="sayers.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>


</head>

<body>
  <header>The World of Dorothy Sayers: a Portrait of an Artist</header>
  <br>
  <div id="d3force">
  <script type="text/javascript">

// var count = 0;

// nodes.forEach(function(n) {
//   var div = document.createElement('div');
//   div.innerHTML = count + ": " + n.name + " " + n.category;
//   document.body.appendChild(div);
//   count = count + 1;
// });


var width = 1000,
    height = 1000;

var svg = d3.select('body').append('svg')
    .attr('width', width)
    .attr('height', height);

var force = d3.layout.force()
    .size([width, height])
    .linkStrength(0.01)
    .friction(0.9)
    .charge(-300)
    .gravity(0.1);

force.linkDistance(width/2);

d3.json("sayers.json", function(error, graph) {
    if (error) throw error;

    force
        .nodes(graph.nodes)
        .links(graph.links)
        .start();

    var link = svg.selectAll('.link')
        .data(graph.links)
        .enter().append('line')
        .attr('class', 'link');

    var node = svg.selectAll('.node')
        .data(graph.nodes)
        .enter().append('circle')
        .attr('class', 'node')
        .style("fill", function(d) {
            if (d.category === "London") {return "#7A297A";}
            else if (d.category === "family") {return "#A30000";}
            else if (d.category === "Oxford") {return "#297A29";}
            else if (d.category === "Somerville") {return "#7ACC29";}
            else if (d.category === "Godolphin") {return "#E6E68A";}
            else if (d.category === "L'Ecole des Roches") {return "#CCA37A";}
            else if (d.category === "Bluntisham") {return "#7A5229";}
            else if (d.category === "self") {return "#2929A3";}
            else {return "black";}
        })

    force.on('end', function() {
        node.attr('r', width/25)
            .attr('cx', function(d) { return d.x; })
            .attr('cy', function(d) { return d.y; });
        link.attr('x1', function(d) { return d.source.x; })
            .attr('y1', function(d) { return d.source.y; })
            .attr('x2', function(d) { return d.target.x; })
            .attr('y2', function(d) { return d.target.y; });
        });
    });

  </script>
</div>

  <footer>
    <ul>
      <li>Filter by Year</li>
      <li>About & Credits</li>
    </ul>
  </footer>


</body>
  <script type="text/javascript" src="sayers.js"></script>
</html>
