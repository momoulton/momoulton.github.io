<!DOCTYPE html>
<html>

<head>
  <link rel='stylesheet' type="text/css" href="sayers.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>
  <script type='text/javascript' src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"> </script>


</head>

<body>
  <header>The World of Dorothy Sayers: a Portrait of an Artist</header>
  <br>

    <p class="label">D3 Force-Direction Layout: Circles</p>
  <script type="text/javascript">

var width = 500,
    height = 500;

var svg = d3.select('body').append('svg')
    .attr('width', width)
    .attr('height', height);

var force = d3.layout.force()
    .size([width, height])
    .linkDistance(150)
    .friction(.9)
    .charge(-200)
    .gravity(0.1);

//Set up tooltip
var tip = d3.tip()
    .attr('class', 'd3-tip')
    .offset([-10, 0])
    .html(function (d) {
    return  d.name + "";
})
svg.call(tip);

d3.json("sayers.json", function(error, graph) {
    if (error) throw error;

    force
        .nodes(graph.nodes)
        .links(graph.links)
        .start();

    var link = svg.selectAll('.link')
        .data(graph.links)
        .enter().append('line')
        .attr('class', 'link');

    var node = svg.selectAll('.node')
        .data(graph.nodes)
        .enter().append('circle')
        .attr('class', 'node')
        .attr("r", 10)
        .style("fill", function(d) {
            if (d.category === "London") {return "#7A297A";}
            else if (d.category === "family") {return "#A30000";}
            else if (d.category === "Oxford") {return "#297A29";}
            else if (d.category === "Somerville") {return "#7ACC29";}
            else if (d.category === "Godolphin") {return "#E6E68A";}
            else if (d.category === "L'Ecole des Roches") {return "#CCA37A";}
            else if (d.category === "Bluntisham") {return "#7A5229";}
            else if (d.category === "self") {return "#2929A3";}
            else {return "black";}
        })
        .call(force.drag)
        .on('mouseover', tip.show) //Added
        .on('mouseout', tip.hide); //Added

    // node.append("text")
    //   .attr("dx", 12)
    //   .attr("dy", ".35em")
    //   .text(function(d) { return d.name; });

    force.on('tick', function() {
        node.attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });
        link.attr('x1', function(d) { return d.source.x; })
            .attr('y1', function(d) { return d.source.y; })
            .attr('x2', function(d) { return d.target.x; })
            .attr('y2', function(d) { return d.target.y; });
        });
    });

  </script>


  <footer>
    <ul>
      <li>Filter by Year</li>
      <li>About & Credits</li>
    </ul>
  </footer>


</body>
  <script type="text/javascript" src="sayers.js"></script>
</html>
